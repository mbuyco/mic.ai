#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
COMPOSE_FILE="$ROOT_DIR/compose.yml"

if command -v podman >/dev/null 2>&1 && podman compose version >/dev/null 2>&1; then
  exec podman compose -f "$COMPOSE_FILE" "$@"
fi

if command -v podman-compose >/dev/null 2>&1; then
  exec podman-compose -f "$COMPOSE_FILE" "$@"
fi

if command -v docker >/dev/null 2>&1 && docker compose version >/dev/null 2>&1; then
  exec docker compose -f "$COMPOSE_FILE" "$@"
fi

echo "Error: no compose runtime found (tried 'podman compose', 'podman-compose', and 'docker compose')." >&2
exit 1
